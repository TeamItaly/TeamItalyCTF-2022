package main

import (
	"crypto/md5"
	"fmt"
	"math/rand"
	"os"
	"strings"
	"syscall"
	"time"
)

func logqst(q qst) {
	fmt.Println()
	fmt.Println(q.question)
	fmt.Println(q.answers)
}

type qst struct {
	question     string
	answers      string
	deathMessage string
}

func main() {
	var input string
	var indx int = 0

	qsts := []qst{
		qst{
			question: "You see an italian white rabbit with a coppola, what do you do?",
			answers: `A) Follow it
B) Invite him for a coffee
C) Kick it
D) Ignore it
E) Run away
F) Go home`,
			deathMessage: "The italian white rabbit escaped",
		},
		qst{
			question: "You encountered a \"Queen of Hearts's soldier\", he wants to play briscola, what is your response?",
			answers: `A) Accept
B) Decline
C) Keep walking and ignore him
D) Ask the italian white rabbit
E) Beat him with a stick
F) Run away`,
			deathMessage: "The soldier got mad and arrested you",
		},
		qst{
			question: "The \"Mad Hatter\" invites you to a pizzata, do you accept?",
			answers: `A) Yes
B) No
C) Punch him
D) Politely decline
E) Beat him with a stick
F) Run away`,
			deathMessage: "You got poisoned",
		},
		qst{
			question: "You picked up a mozzarella di bufala, what do you do?",
			answers: `A) Pick it up
B) Throw it
C) Leave it
D) Make a pizza
E) Eat it
F) Go back`,
			deathMessage: "You stumbled over a log",
		},
		qst{
			question: "There is a piaggio vespa next to a tree, what do you do?",
			answers: `A) Drive it
B) Kick it
C) Knock it
D) Ignore it
E) Ask the italian white rabbit
F) Go back`,
			deathMessage: "Someone stabbed you",
		},
	}

	maze := [8][8][8]uint8{

		{
			{0xae, 0x39, 0x17, 0x53, 0xba, 0x9e, 0xa0, 0xee},
			{0xc2, 0x1d, 0x62, 0xe1, 0x70, 0xce, 0x7e, 0x1a},
			{0xb4, 0x8b, 0x54, 0xb, 0x99, 0xd8, 0x8a, 0xaa},
			{0x1c, 0xe1, 0x5b, 0xb0, 0xc7, 0x6b, 0x8b, 0xf0},
			{0x86, 0xec, 0x36, 0xb2, 0xf6, 0xf6, 0xc9, 0x2},
			{0xa4, 0xfe, 0xca, 0xf8, 0xbb, 0x95, 0xd5, 0x24},
			{0x7c, 0x2a, 0x6e, 0x91, 0x13, 0xb4, 0x78, 0x38},
			{0x70, 0x26, 0xf8, 0xb4, 0x0, 0x2c, 0x7e, 0x82},
		},
		{
			{0x7a, 0x7c, 0x8a, 0x5, 0x4b, 0xf2, 0x5c, 0xf8},
			{0x9a, 0x62, 0xe8, 0xfd, 0xa0, 0x62, 0x7a, 0x72},
			{0x62, 0xf0, 0xc, 0xbb, 0x7d, 0xc6, 0xea, 0xa2},
			{0x80, 0x1f, 0xfa, 0xf3, 0x80, 0x49, 0x6b, 0x12},
			{0x36, 0xab, 0x63, 0x7f, 0xbe, 0xac, 0x8f, 0xfe},
			{0xba, 0xa4, 0x2c, 0xca, 0xfc, 0x0, 0xed, 0x7e},
			{0xc4, 0xd2, 0xee, 0xee, 0xe, 0xec, 0x5, 0xb7},
			{0xe8, 0xa2, 0xe4, 0x46, 0x74, 0xa0, 0x6c, 0xa3},
		},
		{
			{0x2c, 0xc6, 0xba, 0x60, 0x44, 0x14, 0x66, 0x50},
			{0xe8, 0x7f, 0xf5, 0x24, 0xb0, 0x40, 0xf8, 0x1c},
			{0x5a, 0x49, 0xfc, 0x1e, 0x8d, 0x6c, 0x52, 0x52},
			{0xe2, 0x55, 0xe4, 0x69, 0x4d, 0xdb, 0x1b, 0x72},
			{0xb2, 0xb3, 0xa6, 0xd7, 0xaa, 0x12, 0x9b, 0x36},
			{0x0, 0x53, 0x16, 0x7a, 0xc4, 0xf4, 0x77, 0x68},
			{0x7a, 0x7d, 0xfe, 0x65, 0xc, 0xe5, 0xd5, 0x2b},
			{0x6, 0xe9, 0x4d, 0x6d, 0xc8, 0xb6, 0xb8, 0x7f},
		},
		{
			{0x30, 0x6e, 0xb2, 0xcc, 0x60, 0xe2, 0x7c, 0xf4},
			{0x6e, 0xa0, 0x6c, 0x4e, 0x0, 0x3c, 0x9e, 0x96},
			{0x88, 0x30, 0x94, 0x73, 0x60, 0xdc, 0x1c, 0x74},
			{0xa4, 0x3e, 0xa8, 0x35, 0xe0, 0x82, 0x2, 0xa8},
			{0x1a, 0xc9, 0xbb, 0x77, 0x2b, 0x8e, 0x60, 0x7a},
			{0xd8, 0x7d, 0xd2, 0xd4, 0xbf, 0x6c, 0x42, 0x28},
			{0x98, 0x4f, 0xba, 0x7e, 0x64, 0x70, 0x64, 0x6c},
			{0xa4, 0x8, 0xcc, 0x5a, 0x40, 0x28, 0xf2, 0x4e},
		},
		{
			{0xd0, 0xca, 0x26, 0xe4, 0xda, 0x8c, 0xec, 0xb6},
			{0x8, 0x54, 0x24, 0xf2, 0xbc, 0x42, 0x46, 0x98},
			{0x74, 0x56, 0xec, 0x7b, 0xbd, 0x98, 0x50, 0x42},
			{0x70, 0xc4, 0x3e, 0x3c, 0xd7, 0x21, 0x80, 0xa2},
			{0xfe, 0x22, 0xe1, 0x4a, 0xde, 0x94, 0xc6, 0xa4},
			{0xec, 0xb2, 0xdf, 0xb5, 0x5f, 0x84, 0xa2, 0xb4},
			{0x48, 0x54, 0x4, 0x30, 0xa, 0xa8, 0x4a, 0xee},
			{0x4c, 0xca, 0x28, 0x28, 0x46, 0x4, 0x22, 0xf4},
		},
		{
			{0xa0, 0xe6, 0x80, 0x2, 0x50, 0x58, 0x24, 0xaa},
			{0xca, 0xa8, 0xf8, 0x2c, 0x18, 0x2c, 0xe8, 0xc},
			{0xec, 0xd, 0x31, 0x65, 0xe8, 0x5a, 0x2c, 0xb4},
			{0x8, 0x5, 0x56, 0xf1, 0x59, 0x34, 0x4a, 0x98},
			{0x2, 0x6, 0xfe, 0x0, 0xa9, 0x2e, 0x2a, 0xec},
			{0xec, 0xa2, 0x2e, 0x9a, 0x3d, 0x4, 0x2a, 0x90},
			{0x26, 0xe, 0x38, 0xa4, 0x78, 0xc2, 0xdc, 0xdc},
			{0x3e, 0x0, 0x40, 0x78, 0xf8, 0x90, 0x50, 0xf8},
		},
		{
			{0x52, 0x20, 0x50, 0x4e, 0xce, 0x1e, 0xba, 0x58},
			{0xba, 0x3a, 0x9c, 0x80, 0xca, 0xda, 0x28, 0x8c},
			{0xac, 0x6, 0x3e, 0x74, 0x1a, 0x44, 0xf0, 0x3e},
			{0x1e, 0x18, 0x94, 0xe2, 0x57, 0x8d, 0x51, 0xf3},
			{0x18, 0xec, 0xd0, 0x2, 0x40, 0x38, 0x22, 0x94},
			{0x52, 0x6c, 0x82, 0x51, 0x53, 0x92, 0x9e, 0xfe},
			{0xe6, 0xf0, 0x12, 0xa1, 0xd8, 0x17, 0x19, 0x73},
			{0x4a, 0xea, 0x18, 0x3d, 0x4d, 0xc1, 0x86, 0xbd},
		},
		{
			{0xb6, 0xc, 0x4a, 0x28, 0x6, 0xe9, 0xd, 0xe0},
			{0xda, 0x3a, 0xba, 0x59, 0xb, 0x1d, 0xae, 0xac},
			{0xc2, 0xf2, 0x6f, 0xf7, 0xbc, 0x5f, 0xc3, 0xd8},
			{0x1c, 0xbc, 0xbf, 0x9a, 0xc8, 0xac, 0x41, 0x21},
			{0x3f, 0x78, 0xfd, 0xd5, 0x67, 0x68, 0xfc, 0x12},
			{0xa7, 0x8b, 0x7d, 0x68, 0xdf, 0xa4, 0xe0, 0x6e},
			{0x64, 0x9e, 0x3a, 0x34, 0xad, 0xdf, 0x51, 0x82},
			{0x0, 0x5e, 0x32, 0xe4, 0x7b, 0x47, 0xd2, 0xef},
		},
	}

	var x, y, z int8 = 0, 0, 0

	go func() {
		rand.Seed(time.Now().Unix())
		time.Sleep(time.Duration(rand.Intn(10)+3) * time.Second)
		_, _, e1 := syscall.RawSyscall(syscall.SYS_PTRACE, uintptr(syscall.PTRACE_TRACEME), 0, 0)

		if e1 != 0 {
			os.Exit(-1)
		}

	}()

	go func() {
		time.Sleep(30 * time.Second)
		os.Exit(-1)
	}()

	fmt.Println(`
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$

$$$$$""""""??"""""3$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
$$$$$$c          d$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$???$$$$$$$$$$$$$$$$????$$$
$$$$$$$          $$$$'"""""")$$$$,'"""""",$$$P"   . '""" J '""""'..    '?$
$$$$$$$  dk      $$$$h      $$$$$$L     ;$$$"   :$$$     dk     J$$>     $
$$$$$$E d$$L     '$$$$     :$$$$$$h     9$$     9$$$h   .$E     9$$L,uzcd$
$$P""" :$$$$.     9$$$     :$$$$$$$     9$F     $$$$$$hd$$E     9P""?$$$$$
P"      "$$$$     '$$$     :$$$?$$$     9$>     $$$$$$$$$$$     "     '' 9
          "??'     ?$$>    :P"   "$     9$>     $$$$$$$F?$$     ;cc,    z$
c,cdF  .     u     '?$>    :>     4     9$k     9$$$$$$  $$     9$$$?dd???
$$$P  ;$$cccd$k     '$>    :hcd>  d     9$$      ?$$$P"  $E     9$$$
$$$   '$$$$$$$$      ?>    '$$$' ,F     '$$h.           d$"     '$$$>    ,
$$"    '?$$$$$F       ? .   '' ,cP,,,,,,,'$$$c,       ud$" .,,,. '""   ,c$
" .,,,,,,'3$$C,,,uuu,,,2$$$$hd$$$F"3$$$$$$$$$$$$bbcd$$$$$$$$$$$$$$$$h$$$$$
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$C"JF , '$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$F )L 9; 2$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
"""$P??$""$P""?$$""?$)"9F""""?$P"""""?F"""""?E"""$$$b""""3E""?$>"96""""?$$
h  $'  $'," 9$  ?  '?) $$  $h  $  c==?E  ?P ,$  J$$$F c  $$   ?> $$  $h  $
$L ' , ' b  $$  J J,   $$  $P  $  sc==E  c '$$  ?$?$' "  "$ J,   $$  $P  $
$$..9b..J$c,'".zC.?$L..?P  "',d$,.'" ,E..$L..$..''.F.J$L..I.?$L..?6  "',d$
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
`)

	for {
		logqst(qsts[indx])

		for ok := true; ok; ok = !(len(input) == 1) {
			_, err := fmt.Scanln(&input)

			if err != nil {
				return
			}
		}

		input = strings.ToUpper(input)
		hash := md5.Sum([]byte(input))

		switch hash {
		case [16]byte{0x7f, 0xc5, 0x62, 0x70, 0xe7, 0xa7, 0x0f, 0xa8, 0x1a, 0x59, 0x35, 0xb7, 0x2e, 0xac, 0xbe, 0x29}:
			if x+1 < 8 && maze[z][y][x+1]&1 == 1 {
				x += 1
			} else {
				goto lose
			}
		case [16]byte{0x9d, 0x5e, 0xd6, 0x78, 0xfe, 0x57, 0xbc, 0xca, 0x61, 0x01, 0x40, 0x95, 0x7a, 0xfa, 0xb5, 0x71}:
			if x-1 > 0 && maze[z][y][x-1]&1 == 1 {
				x -= 1
			} else {
				goto lose
			}
		case [16]byte{0x0d, 0x61, 0xf8, 0x37, 0x0c, 0xad, 0x1d, 0x41, 0x2f, 0x80, 0xb8, 0x4d, 0x14, 0x3e, 0x12, 0x57}:
			if y+1 < 8 && maze[z][y+1][x]&1 == 1 {
				y += 1
			} else {
				goto lose
			}
		case [16]byte{0xf6, 0x23, 0xe7, 0x5a, 0xf3, 0x0e, 0x62, 0xbb, 0xd7, 0x3d, 0x6d, 0xf5, 0xb5, 0x0b, 0xb7, 0xb5}:
			if y-1 > 0 && maze[z][y-1][x]&1 == 1 {
				y -= 1
			} else {
				goto lose
			}
		case [16]byte{0x3a, 0x3e, 0xa0, 0x0c, 0xfc, 0x35, 0x33, 0x2c, 0xed, 0xf6, 0xe5, 0xe9, 0xa3, 0x2e, 0x94, 0xda}:
			if z+1 < 8 && maze[z+1][y][x]&1 == 1 {
				z += 1
			} else {
				goto lose
			}
		case [16]byte{0x80, 0x06, 0x18, 0x94, 0x30, 0x25, 0x31, 0x5f, 0x86, 0x9e, 0x4e, 0x1f, 0x09, 0x47, 0x10, 0x12}:
			if z-1 > 0 && maze[z-1][y][x]&1 == 1 {
				z -= 1
			} else {
				goto lose
			}
		default:
			fmt.Println("Wait that's illegal")
			goto lose
		}

		if x == 7 && y == 7 && z == 7 {
			fmt.Println(`

                        .,,.    ..
                      z$$$$$b c$$$L
                   ,,$$$$$$$F,,"?$$                .,,,
              ,c" z$$$$$$$$",$$$c'F .          ,c$$$$,.
             ,$" d$$$$$$P",d$$$$$b'F3$ccc,,cc$$$$$$$$$$$c
            4$F 4$$$PF",c$$$?$$$$" $c$$$$$$$$$$$$$$$$$$$".
            $PL 4$$zc$'$$PLd$$$$$P 3$$$$$$$$$$$$$$$$$$$$$$F
            $ L '$$$$P,$$$"" d$$ : ?$$$$$$$$$$$$$$$$$$$$$P
             J$L d$P",$$$L,-,$$$b;h $$$$$$$$$$$$$$$$$$$P",c
             ?$$.$ '$$$$$$$$$$$$c;F $$$$$$$$$$$$$$$$?5,c$$$
             '$$'."?,"L$$$$$$$$ :/,d$$$$$L"$$$$$$$$$$$$$$$"
              "$b"$cc,"$$$$$$$$cr,$$$$$$$?b,"?$$$$$$$$$$P"
                "?$$$$c'$$$bK""=d$$P??",r= ??$c,."""",,
     'L c ,         F?$-"$$F <!'; nnMM",;<!!; ?$$$$$P"
     k'b$,F          "";;" <!!' ,MMMM";!!!!' - $$P"
      3$Fb$    =nnnnd>'',;!!>',nMMMM ;!!!!><$$c,
       "$ $   <>"MMMMMn'''' ,nMMMM  <!!!!! d$$$$$c,
        $c"    '-,'TC)MMMMMMMMMMMM >'!!!!!;,"?$$$$$bc
       ,$$    ,cb,'<, )MMMMMMMMMMM !;,''''     ""C3$$$,
       $$$F ,c$$$$P'<> )L.,cc,,"TMe'!!!!!!   ,c$$$$$$$$P
      <$$$$ $$$$F  ''   b,'C77?9hcc,,,,,ccd$$$$$$PF""
      3$$$$ $$P"        '4n,"""""""""""??""".,,,       .,,xn,,.
      4$$$$cP"            '"4MMMMMMMP",==~",;;,.  -=MMMMMMMMMMM=
       $$P"                    ""_r='".df:!!!!!!!!!;, """"~=<
       '                      ,xP" xMMMMM <!!!!!!!!!!!>
                         _,eM"",dfJMMMMMMM.'!!!!!!!!!!!!;
                      ,nMMP",dMMMLMMMMMMMMMe'!!!!!!!!!!!!>
                  ,eMMMMP",MMMMMMMMMMMMMMMMMe'!!!!!!!!!!!!>
                eMMMMMM",dMMMMMMMMMMMMMMMMMMMr'!!!!!!!!!!!!
             ,dMMMMMMP',MMMMMMMMMMMMMMMMMMMMMM !!!!!!!!!!!!!
           ,dMMMMMMMP dMMMMMMMMMMMMMMMMMMMMMMM !!!!!!!!!!!!!
         ,MMMMMMMMM" dMMMMMMMMMMMMMMMMMMMMMMMM !!!!!!!!!!!>!
       eMMMMMMMMMMP MMMMMMMMMMMMMMMMMMMMMMMMMP !!!!!!!!!!!;!
     eMMMMMMMMMMMM dMMMMMMMMMMMMMMMMMMMMMMMMM ;!!!!!!!!!' !'
    "4MMMMMMMMMMM'uMMMMMMMMMMMMMMMMMMMMMMMMM> !!!!!!!!!',!!
    ;!> ;,"MMMMM>;MMMMMMMMMMMMMMMMMMMMMMMMMM <!!!!!!!' ,!!'
    !! <!!>,"4MM ,c ;;;;,.""TMMMMMMMMMMMMMM>;!!!!!!' ,!!',
    ! <!!!!!!:." " <!!!!!!!!!:.""4MMMMMMMMM !!!!!! ,!!! ;!!,           . 4,
     <!!!!!!!!!!! <!!!!!!!!!!!!!!:..""""TT";!!!! ,<!!!  !!!!>     .,zc$$$c",
    ;!!!!!!!!!!!';!!!!!!!!!!!!!!!!!!!!!!!!:!!! ,!!!!! ;>'!!!!!>"$$$$$P???L ",
    !!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!'',!!!!!! ;!!> <!!!!>"$$"      ?P'b
    !!!!!!!!!!! ,''''!!!!!!!!!!!!!!!!!!!!',<!!!!!!!> !!!!> !!!!! ?         -$E
    !!!!!!!!!!! <<',;;,''<!!!!!!!!!!!!!(;!!!!!!!!!!  !!!!! '!!!!!
    '<!!!!!!!!!!> '''!!!>;''!!!!!!!!!!!!!!!!!!!!!!!  !!!!!>''''
       '''''''!! ''dc,,zcc';,'''!!!!!!!!!!!!!!!!!!!> !!!!!'
                  ,$$$$$$$b'<!>;, ''''!!!!!!!!!!!!!> '''
                 ,$$$$$$$$$F   ''''       '''''''
                ,$$$$$$$$"
                $$$$$$P"
              ,$$$$$P"
             ,$$$$"
    "$c-, , '$$$F
     "$$c?,%,4$F
      '?$c"c'4"
         4c'b
           "
`)
			fmt.Println("Congratulations You Escaped!")
			flag := os.Getenv("FLAG")
			if flag != "" {
				fmt.Println("Here is your prize:", flag)
			} else {
				fmt.Println("Flag not found ;(")
			}
			return

		}

		indx = 1 + rand.Intn(len(qsts)-1)
	}

lose:
	fmt.Println(qsts[indx].deathMessage)
	fmt.Println("Game Over ;(")
}
